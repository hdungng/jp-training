<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>漢字検索 | Kanji Lookup</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="responsive.css">
    <style>
        .kanji-lookup-wrapper {
            max-width: 960px;
            margin: 32px auto;
            padding: 0 12px;
        }

        .kanji-lookup__search {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .kanji-lookup__input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 1.1em;
        }

        .kanji-lookup__search-btn {
            padding: 8px 24px;
            background: #20C6C6;
            color: #fff;
            border: none;
            border-radius: 3px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.2s;
        }

        .kanji-lookup__search-btn:hover {
            background: #E6F4FF;
        }

        .kanji-lookup-grid {
            display: grid;
            grid-template-columns: 220px 1fr;
            gap: 24px;
        }

        .kanji-lookup__filter {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 18px 14px;
            font-size: 1em;
            min-width: 0;
        }

        .kanji-lookup__filter-title {
            font-size: 1.05em;
            color: #20C6C6;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .kanji-lookup__checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 18px;
        }

        .kanji-lookup__checkbox-label {
            font-size: 1em;
            color: #222;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .kanji-lookup__filter-btn {
            padding: 6px 18px;
            background: #20C6C6;
            color: #fff;
            border: none;
            border-radius: 3px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.2s;
        }

        .kanji-lookup__filter-btn:hover {
            background: #E6F4FF;
        }

        .kanji-lookup__kanji-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 18px;
        }

        .kanji-card {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 18px 0 10px 0;
            text-align: center;
            font-size: 2.2em;
            color: #222;
            font-family: 'Meiryo', 'MS PGothic', Arial, sans-serif;
            font-weight: 700;
            box-shadow: 0 1px 4px rgba(60, 100, 180, 0.04);
            transition: box-shadow 0.2s, border-color 0.2s;
            cursor: pointer;
        }

        .kanji-card:hover {
            border-color: #20C6C6;
            box-shadow: 0 2px 12px rgba(230, 0, 51, 0.08);
            color: #20C6C6;
        }

        .kanji-card__char {
            font-size: 1.6rem;
            font-weight: 700;
            color: #222;
            font-family: 'Meiryo', 'MS PGothic', Arial, sans-serif;
            margin-bottom: 2px;
        }

        .kanji-card__hanviet {
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.8rem;
            color: #20C6C6;
            font-weight: 600;
            margin-bottom: 2px;
            letter-spacing: 1px;
        }

        @media (max-width: 800px) {
            .kanji-lookup-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .kanji-lookup__filter {
                max-width: 340px;
                margin: 0 auto;
            }
        }
    </style>
</head>

<body>
    <!-- ...existing code... -->
    <header class="page-header">
        <div class="wrapper">
            <nav class="page-header__nav">
                <div class="page-header__logo">ProjectLogo</div>
                <button class="hamburger" id="hamburger" aria-label="メニュー">
                    <span class="hamburger__bar"></span>
                    <span class="hamburger__bar"></span>
                    <span class="hamburger__bar"></span>
                </button>
                <ul class="page-header__menu" id="mainMenu">
                    <li class="page-header__item"><a href="#" class="page-header__link">Home</a></li>
                    <li class="page-header__item"><a href="#" class="page-header__link">About</a></li>
                    <li class="page-header__item"><a href="#" class="page-header__link">Register</a></li>
                    <li class="page-header__item"><a href="#" class="page-header__link">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <!-- ...existing code... -->

    <section class="carousel">
        <div class="wrapper">
            <div class="carousel__container">
                <div class="carousel__slide carousel__slide--active">
                    <img src="./assets/img/carouser.png" alt="Slide 1" class="carousel__image">
                    <div class="carousel__caption">Welcome to Project Template</div>
                </div>
                <div class="carousel__slide">
                    <img src="https://via.placeholder.com/900x300?text=Slide+2" alt="Slide 2" class="carousel__image">
                    <div class="carousel__caption">Beautiful and Responsive</div>
                </div>
                <div class="carousel__slide">
                    <img src="https://via.placeholder.com/900x300?text=Slide+3" alt="Slide 3" class="carousel__image">
                    <div class="carousel__caption">Easy to Customize</div>
                </div>
                <button class="carousel__control carousel__control--prev">&#10094;</button>
                <button class="carousel__control carousel__control--next">&#10095;</button>
            </div>
        </div>
    </section>

    <!-- ...existing code... -->
    <div class="kanji-lookup-wrapper">
        <h1 style="font-size:1.4em;color:#20C6C6;font-weight:700;margin-bottom:18px;">漢字検索</h1>
        <form class="kanji-lookup__search" id="kanjiSearchForm" autocomplete="off">
            <input type="text" class="kanji-lookup__input" id="kanjiSearchInput" placeholder="漢字または意味を入力..." />
            <button type="submit" class="kanji-lookup__search-btn">検索</button>
        </form>
        <div class="kanji-lookup-grid">
            <aside class="kanji-lookup__filter">
                <div class="kanji-lookup__filter-title">レベルで絞り込む</div>
                <div class="kanji-lookup__checkbox-group">
                    <label class="kanji-lookup__checkbox-label"> <input type="checkbox" class="kanji-lookup__checkbox"
                            value="N5" checked>N5</label>
                    <label class="kanji-lookup__checkbox-label"> <input type="checkbox" class="kanji-lookup__checkbox"
                            value="N4" checked>N4</label>
                    <label class="kanji-lookup__checkbox-label"> <input type="checkbox" class="kanji-lookup__checkbox"
                            value="N3" checked>N3</label>
                    <label class="kanji-lookup__checkbox-label"> <input type="checkbox" class="kanji-lookup__checkbox"
                            value="N2" checked>N2</label>
                    <label class="kanji-lookup__checkbox-label"> <input type="checkbox" class="kanji-lookup__checkbox"
                            value="N1" checked>N1</label>
                    <!-- Other levels... -->
                </div>
                <button class="kanji-lookup__filter-btn" id="kanjiFilterBtn" type="button">フィルター</button>
            </aside>
            <section class="kanji-lookup__kanji-list" id="kanjiList">
                <!-- Kanji cards will be rendered here -->
            </section>
            <div id="resultsInfo" style="margin-top: 10px; color: #888;">
                Total records: <span id="totalRecords">0</span>
            </div>
            <div class="pagination">
                <button class="pagination__btn" id="prevPageBtn" disabled>&laquo;</button>
                <span id="pageInfo">Page 1 of 1</span>
                <button class="pagination__btn" id="nextPageBtn">&raquo;</button>
            </div>
        </div>
    </div>

    <script>
        // Load Kanji data from JSON file
        let kanjiData = [];

        fetch('./kanjiData.json')  // Adjust the path to your actual file
            .then(response => response.json())
            .then(data => {
                kanjiData = data;
                renderKanjiList(currentPage);
            })
            .catch(error => console.error('Error loading JSON:', error));

        const itemsPerPage = 35;
        let currentPage = 1;

        // Render Kanji list based on the current page and filters
        function renderKanjiList(page) {
            const filteredData = filterKanjiData();
            const paginatedData = paginate(filteredData, page);

            // Clear current kanji list
            const kanjiList = document.getElementById('kanjiList');
            kanjiList.innerHTML = '';

            if (paginatedData.length === 0) {
                kanjiList.innerHTML = '<div style="grid-column:1/-1;text-align:center;color:#888;">該当する漢字が見つかりません。</div>';
            } else {
                paginatedData.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'kanji-card';
                    card.title = item.meaning;
                    card.innerHTML = `
                    <div class="kanji-card__char">${item.char}</div>
                    <div class="kanji-card__hanviet">${item.hanviet}</div>
                    <div style="font-size:0.4em;color:#888;margin-top:4px;">${item.level}</div>
                `;
                    card.addEventListener('click', () => {
                        alert(`Kanji: ${item.char}\nVietnamese Character: ${item.hanviet}\nLevel: ${item.level}\nMeaning: ${item.meaning}\nReading: ${item.pronunciation}`);
                    });
                    kanjiList.appendChild(card);
                });
            }

            // Update pagination info
            updatePaginationInfo(filteredData);
        }

        // Filter Kanji data based on search and selected levels
        function filterKanjiData() {
            const search = document.getElementById('kanjiSearchInput').value.trim();
            const levels = getSelectedLevels();

            let filtered = kanjiData.filter(k => levels.includes(k.level));

            if (search) {
                filtered = filtered.filter(k =>
                    k.char.includes(search) ||
                    k.meaning.includes(search) ||
                    (k.hanviet && k.hanviet.toLowerCase().includes(search.toLowerCase())) ||
                    k.level.toLowerCase().includes(search.toLowerCase())
                );
            }

            return filtered;
        }

        // Get selected levels from checkboxes
        function getSelectedLevels() {
            return Array.from(document.querySelectorAll('.kanji-lookup__checkbox:checked')).map(cb => cb.value);
        }

        // Paginate the filtered data
        function paginate(data, page) {
            const start = (page - 1) * itemsPerPage;
            const end = page * itemsPerPage;
            return data.slice(start, end);
        }

        // Update pagination controls and info
        function updatePaginationInfo(filteredData) {
            const totalItems = filteredData.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);

            // Update page info
            const pageInfo = document.getElementById('pageInfo');
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;

            const totalRecords = document.getElementById('totalRecords');
            totalRecords.textContent = totalItems;

            // Enable/Disable pagination buttons
            const prevPageBtn = document.getElementById('prevPageBtn');
            const nextPageBtn = document.getElementById('nextPageBtn');

            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages;
        }

        // Event listeners for search form and filter button
        document.getElementById('kanjiSearchForm').addEventListener('submit', function (e) {
            e.preventDefault();
            currentPage = 1;
            renderKanjiList(currentPage);
        });
        document.getElementById('kanjiFilterBtn').addEventListener('click', function () {
            currentPage = 1;
            renderKanjiList(currentPage);
        });

        // Pagination button click events
        document.getElementById('prevPageBtn').addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderKanjiList(currentPage);
            }
        });
        document.getElementById('nextPageBtn').addEventListener('click', () => {
            const filteredData = filterKanjiData();
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderKanjiList(currentPage);
            }
        });

    </script>
</body>

</html>